<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Web Components Examples</title>

<script type="text/javascript" src="bower_components/webcomponentsjs/webcomponents.min.js"></script>
<script type="text/javascript" src="bower_components/webcomponentsjs/HTMLImports.min.js"></script>
<script type="text/javascript" src="bower_components/webcomponentsjs/CustomElements.min.js"></script>
<!--
<script type="text/javascript" src="bower_components/webcomponentsjs/ShadowDOM.min.js"></script>
-->
<script>

    function supportsTemplate() {
        var result = 'content' in document.createElement('template') === true ? '支持 Template' : '不支持 Template';
        console.log(result);
    }

    function supportsImports() {
        var result = 'import' in document.createElement('link') === true ? '支持 Imports' : '不支持 Imports';
        console.log(result);
    }

    function supportsCustomElements() {
        var result = 'registerElement' in document === true ? '支持 CustomElements' : '不支持 CustomElements';
        console.log(result);
    }

    (function checkSupportsComponents() {
        supportsTemplate();
        supportsImports();
        supportsCustomElements();
    }());

</script>

<link rel="import" href="my_components/alex-dai-elements.html" >
<link rel="import" href="my_components/business-card/business-card.html" >

</head>

<script>
    window.addEventListener('WebComponentsReady', function(e) {
      // all imports loaded
    });
</script>

<style type="text/css">
    body {
        background-color:#eee
    }
</style>

<body class="container">
    <h1>Web Components</h1>

    <h3>Custom Element Examples</h3>
    <!-- <x-foo></x-foo> -->
    <!--<button is="x-foo-button"></button> -->
    <script type="text/javascript">
        // new XFoo().foo();

        // 使用javascript建立Elements
        document.body.appendChild(new XFoo());

        // var parent = document.currentScript.ownerDocument;

        var link = document.querySelector('link[rel=import]');
        var html = link.import;
        var dom = html.body.querySelector('button').cloneNode(true)
        document.body.appendChild(dom);
    </script>


    <h3>Template Examples</h3>
    <div id="container"></div>

    <script type="text/javascript">
        var link = document.querySelector('link[rel="import"]');
        var template = link.import.querySelector('#profileTemplate');

        /*
            錯誤
            template.querySelector('.profile_name').innerText = 'Alex.Dai';
        */

        var content = template.content.cloneNode(true); // 重要

        var _img = 'pub/img/photo.jpg';
        content.querySelector('.profile_img').setAttribute('src', _img);
        content.querySelector('.profile_name').innerText = 'Alex.Dai';
        content.querySelector('.profile_age').innerText = '25';

        document.querySelector('#container').appendChild(content);
    </script>

    <h3>Shadow DOM Examples</h3>

    <x-fooProto data-name="Alex.Dai"
                data-img="pub/img/re757575.jpg"
                data-url="https://github.com/re757575">
    </x-fooProto>


    <h3>Web Components Example - busines-card</h3>

    <busines-card data-default="true"></busines-card>

    <busines-card data-name="Alex.Dai"
                  data-mobile="09xx-xxxxxx"
                  data-tel="04-xxxx-xxxx"
                  data-fax="04-xxxx-xxxx"
                  data-email="alex.dai@xxxx.com"
                  data-address="台中市xxx區xxx路ooo號x樓之o"
                  data-companyName_zh="地球防衛隊"
                  data-companyName_en="Earth Defense Force">
    </busines-card>
</body>
</html>